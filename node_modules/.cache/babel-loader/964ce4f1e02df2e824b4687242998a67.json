{"remainingRequest":"E:\\project1\\project-allocation-student\\node_modules\\babel-loader\\lib\\index.js!E:\\project1\\project-allocation-student\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\project1\\project-allocation-student\\src\\utils\\request.js","dependencies":[{"path":"E:\\project1\\project-allocation-student\\src\\utils\\request.js","mtime":1624286163261},{"path":"E:\\project1\\project-allocation-student\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\project1\\project-allocation-student\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\project1\\project-allocation-student\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBjb29raWUgZnJvbSAnanMtY29va2llJzsKaW1wb3J0IHsgc2V0TG9nb3V0Q29va2llcyB9IGZyb20gJy4uL3V0aWxzL2F1dGgnOwppbXBvcnQgQ09OU1RBTlRTIGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cyc7CnZhciBzZXJ2aWNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PSAncHJvZHVjdGlvbicgPyAnaHR0cDovL2FwaS51c3lkcHJvamVjdGFsbG9jYXRpb24uY29tOjgwMDInIDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMScsCiAgdGltZW91dDogNTAwMAp9KTsKc2VydmljZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIGlmIChjb29raWUuZ2V0KCd0b2tlbicpKSB7CiAgICBjb25maWcuaGVhZGVyc1sndG9rZW4nXSA9IGNvb2tpZS5nZXQoJ3Rva2VuJyk7CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKc2VydmljZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT0gQ09OU1RBTlRTLlJFU1BPTlNFX0NPREUuSldUX0VYUElSRUQpIHsKICAgIHNldExvZ291dENvb2tpZXMoKTsKICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gIi9sb2dpbiI7CiAgICByZXR1cm47CiAgfQoKICB2YXIgcmVzID0gcmVzcG9uc2UuZGF0YTsKICByZXR1cm4gcmVzOwp9KTsKZXhwb3J0IGRlZmF1bHQgc2VydmljZTs="},{"version":3,"sources":["E:/project1/project-allocation-student/src/utils/request.js"],"names":["axios","cookie","setLogoutCookies","CONSTANTS","service","create","baseURL","process","env","NODE_ENV","timeout","interceptors","request","use","config","get","headers","error","Promise","reject","response","data","code","RESPONSE_CODE","JWT_EXPIRED","window","location","href","res"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,SAASC,gBAAT,QAAiC,eAAjC;AACA,OAAOC,SAAP,MAAsB,oBAAtB;AAEA,IAAMC,OAAO,GAAGJ,KAAK,CAACK,MAAN,CAAa;AACzBC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAAZ,IAAwB,YAAxB,GAAuC,2CAAvC,GAAqF,uBADrE;AAEzBC,EAAAA,OAAO,EAAE;AAFgB,CAAb,CAAhB;AAMAN,OAAO,CAACO,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACI,UAACC,MAAD,EAAY;AACR,MAAIb,MAAM,CAACc,GAAP,CAAW,OAAX,CAAJ,EAAyB;AACrBD,IAAAA,MAAM,CAACE,OAAP,CAAe,OAAf,IAA0Bf,MAAM,CAACc,GAAP,CAAW,OAAX,CAA1B;AACH;;AACD,SAAOD,MAAP;AACH,CANL,EAOI,UAACG,KAAD,EAAW;AACP,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CATL;AAYAb,OAAO,CAACO,YAAR,CAAqBS,QAArB,CAA8BP,GAA9B,CACI,UAAAO,QAAQ,EAAI;AACR,MAAIA,QAAQ,CAACC,IAAT,CAAcC,IAAd,IAAsBnB,SAAS,CAACoB,aAAV,CAAwBC,WAAlD,EAA+D;AAC3DtB,IAAAA,gBAAgB;AAChBuB,IAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,QAAvB;AACA;AACH;;AACD,MAAMC,GAAG,GAAGR,QAAQ,CAACC,IAArB;AACA,SAAOO,GAAP;AACH,CATL;AAYA,eAAexB,OAAf","sourcesContent":["import axios from 'axios'\r\nimport cookie from 'js-cookie'\r\nimport { setLogoutCookies } from '../utils/auth'\r\nimport CONSTANTS from '../utils/constants'\r\n\r\nconst service = axios.create({\r\n    baseURL: process.env.NODE_ENV == 'production' ? 'http://api.usydprojectallocation.com:8002' : 'http://localhost:8001',\r\n    timeout: 5000\r\n})\r\n\r\n\r\nservice.interceptors.request.use(\r\n    (config) => {\r\n        if (cookie.get('token')) {\r\n            config.headers['token'] = cookie.get('token')\r\n        }\r\n        return config\r\n    }, \r\n    (error) => {\r\n        return Promise.reject(error)\r\n    }\r\n)\r\n\r\nservice.interceptors.response.use(\r\n    response => {\r\n        if (response.data.code == CONSTANTS.RESPONSE_CODE.JWT_EXPIRED) {\r\n            setLogoutCookies()\r\n            window.location.href = \"/login\"\r\n            return\r\n        }\r\n        const res = response.data\r\n        return res\r\n    }\r\n)\r\n\r\nexport default service\r\n\r\n"]}]}